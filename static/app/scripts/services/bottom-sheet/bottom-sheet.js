// Generated by CoffeeScript 1.8.0
(function() {
  angular.module("worldsheet").factory("BottomSheet", [
    "Item", function(Item) {
      return {
        item: void 0,
        items: void 0,
        is_show: false,
        show: function(item) {
          this.is_show = true;
          this.item = item;
          if ("id" in item) {
            return this;
          } else {
            this.items = Item.$search({
              page: 1,
              items_per_page: 10
            });
            return this;
          }
        },
        close: function() {
          this.is_show = false;
          return this;
        },
        select: function(item, existing_item) {
          var prop;
          for (prop in existing_item) {
            item[prop] = existing_item[prop];
          }
          return item.is_new = false;
        }
      };
    }
  ]).directive("bottomSheet", [
    "BottomSheet", function(BottomSheet) {
      return {
        restrict: "E",
        templateUrl: "/static/app/scripts/services/bottom-sheet/bottom-sheet.html",
        link: function(scope, element, attrs) {
          scope.layout = {
            selected: false
          };
          scope.BottomSheet = BottomSheet;
          scope.$watch("BottomSheet.item", function() {
            scope.item = BottomSheet.item;
            return scope.items = BottomSheet.items;
          });
          return scope.select = function(item, existing_item) {
            BottomSheet.select(item, existing_item);
            return scope.layout.selected = true;
          };
        }
      };
    }
  ]);

}).call(this);
