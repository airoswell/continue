// Generated by CoffeeScript 1.8.0
(function() {
  angular.module("worldsheet.social_accounts", ["worldsheet.auth", "worldsheet.social_accounts.facebook"]);

  angular.module("worldsheet.social_accounts.facebook", ["ngResource"]);

  angular.module("worldsheet.social_accounts.facebook").factory("FB", [
    "$resource", "Auth", function($resource, Auth) {
      var init, resource;
      window.fbAsyncInit = function() {
        FB.init({
          appId: "838251579531523",
          xfbml: true,
          version: "v2.1"
        });
      };
      (function(d, s, id) {
        var fjs, js;
        js = void 0;
        fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) {
          return;
        }
        js = d.createElement(s);
        js.id = id;
        js.src = "//connect.facebook.net/en_US/sdk.js";
        fjs.parentNode.insertBefore(js, fjs);
      })(document, "script", "facebook-jssdk");
      init = function(provider) {
        if (provider === "Facebook") {
          window.fbAsyncInit = function() {
            FB.init({
              appId: "838251579531523",
              xfbml: true,
              version: "v2.1"
            });
          };
          return (function(d, s, id) {
            var fjs, js;
            js = void 0;
            fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) {
              return;
            }
            js = d.createElement(s);
            js.id = id;
            js.src = "//connect.facebook.net/en_US/sdk.js";
            fjs.parentNode.insertBefore(js, fjs);
          })(document, "script", "facebook-jssdk");
        }
      };
      resource = $resource("https://graph.facebook.com/v2.2/:node/:id/:edge");
      return {
        get_user: function() {
          return resource.get({
            node: "me",
            access_token: Auth.get_user().social_account_access_token
          }, function(response) {
            return console.log("facebook response", response);
          }).$promise;
        },
        init: function(provider) {
          return init(provider);
        },
        resource: resource
      };
    }
  ]);

}).call(this);
