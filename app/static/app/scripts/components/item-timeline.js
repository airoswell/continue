// Generated by CoffeeScript 1.8.0
(function() {
  angular.module("continue").controller("itemTimelineCtrl", [
    "$scope", "InfiniteScroll", "ItemTimeline", function($scope, InfiniteScroll, ItemTimeline) {
      var infinite_scroll_timeline;
      console.log("itemTimelineCtrl");
      infinite_scroll_timeline = new InfiniteScroll(ItemTimeline);
      return $scope.load_timeline = function() {
        $scope.layout.loading.timeline = true;
        infinite_scroll_timeline.config({
          init_starts: $scope.timeline_starts,
          model_types: ["Item", "ItemEditRecord", "ItemTransactionRecord"]
        });
        $scope.timeline = infinite_scroll_timeline.load($scope.timeline);
        return $scope.timeline.$asPromise().then(function(response) {
          infinite_scroll_timeline.success_handler(response);
          return $scope.layout.loading.timeline = false;
        }, function() {
          return Alert.show_msg("All timeline events are downloaded ...");
        });
      };
    }
  ]);

}).call(this);
