{% extends 'layout.html'%}

{% block content %}
{% load filters %}

<style>
  .tag.tag-gray.selected{
    background-color: #4889F0;color: #fff;
  }

  .item-thumbnail{
    width:250px;height:200px;
    background:#eee;border:2px solid #ddd;overflow:hidden;cursor:pointer;
  }
  .item-thumbnail.selected{
    border-color: #4184F3;
  }
  .item-thumbnail:hover{
    border: 2px solid #4184F3;
  }
  .item-thumbnail-title{
    text-align:center;color:#666;font-weight:600;font-size:16px;
    margin:5px 0px;cursor: pointer;
  }

</style>

<div id='collection-wrapper' ng-controller="collectionCtrl"
    layout='row' layout-align='end'>
  
  
  <div flex-gt-md="80" flex="100">


    <!-- Add item button -->
    <div trigger style='position:fixed;top:100px;right:20px;z-index:1'>
      <md-button class="md-fab" aria-label="New document"
          ng-click="create_item()" style='background:#4184f3;color:#fff;'>
        <i class="fa fa-plus" style='font-size:20px;line-height:50px;'></i>
      </md-button>
      &nbsp;
      <a href="/app/post/">
        <md-button class="md-fab" aria-label="New document"
            style='background:#4184f3;color:#fff;'>
          <i class="fa fa-align-left" style='font-size:20px;line-height:50px;'></i>
        </md-button>
      </a>
    </div>


    <!-- Available tags -->
    <div class='sidebar' hide-md hide-sm>

      <br/>

      <div class='sidebar-body'>
        <div class='text-large'>View modes</div>
        <div class='tag tag-small tag-gray'
            ng-click='switch_view_mode("detail")'>
          Detail view
        </div>
        <div class='tag tag-small tag-gray'
            ng-click='switch_view_mode("thumbnail")'>
          Thumbnail view
        </div>
      </div>

      <div class='text-large sidebar-body'>
        Available tags
      </div>
      <div class='sidebar-body'>
        {% for tag in available_tags %}
        <span class='tag tag-small tag-gray'
            ng-click="search_by_tag('{{tag}}')"
            ng-class='{"selected": is_searched("{{tag}}")}'>
          {{tag}}
        </span>
        {% endfor %}
      </div>
    </div>

    <!-- Item list -->
    <div id='items-display'
        infinite-scroll="load_items()" infinite-scroll-distance="1"
        infinite-scroll-disabled="layout.loading.items || scrollTop < 200" >
      <div layout='row'>
        <div flex="10"></div>
        <div reduced-padding>
          <div class="section-title-large">
            Your Collection
          </div>
          <div class='text-gray'>
            <i class='fa fa-info-circle'></i>&nbsp;Updating images is easy: just <span class='text-large'>drag&drop</span> your photo onto your items! Or click the <i class='fa fa-camera'></i> for more options.
          </div>
        </div>
      </div>

      <br/>


      <!-- Item thumbnail list -->
      {% verbatim %}
      <div ng-show="layout.view_mode == 'thumbnail' && tags.length == 0"
        layout='row'>
        <div flex-sm="0" flex="10"></div>
        <div ng-cloak
            flex-gt-lg="80" flex-gt-md="80" flex-md="80" flex-sm="100">
          
          <item-editor-pro item="layout.item_to_edit"
              ng-show='layout.item_to_edit.id'>
          </item-editor-pro>

          <div ng-repeat="item in items" style='display:inline-block;margin:20px;'>
            <div style="box-shadow:0px 2px 5px #ccc;">
              <div class='item-thumbnail'
                  ng-class="{'selected': item == layout.item_to_edit}"
                  ng-click="edit_item(item)">
                <img ng-src="{{item.pic}}" alt="" height="250">
              </div>
              <div style='background:#fff;padding:2px 10px;'>
                <item-editor-pro-basics></item-editor-pro-basics>
              </div>
            </div>
            <div class='item-thumbnail-title'
                ng-bind="item.title"
                ng-click="edit_item(item)"></div>
          </div>

        </div>
      </div>
      {% endverbatim %}

      <!-- Item detail list -->
      <div ng-hide="tags.length > 0" layout='row'
          ng-show="tags.length == 0 && layout.view_mode == 'detail'">
        <div flex-sm="0" flex="10"></div>
        <div flex-gt-lg="70" flex-gt-md="80" flex-md="80" flex-sm="100">
          <item-editor-pro item="item" ng-repeat="item in items">
          </item-editor-pro>
        </div>
      </div>

      <!-- Search result -->
      <div ng-show="tags.length > 0" layout='row'>

        <div flex-sm="0" flex-md="0" flex="10"></div>
        <div flex-gt-lg="70" flex-gt-md="80" flex-md="100" flex-sm="100">
          <div ng-cloak ng-show="layout.search_result_not_found">
            <div class='text-large'>
              No item found with the criteria.
            </div>
          </div>
          <item-editor-pro item='item'
              ng-repeat="item in items_search_results">
          </item-editor-pro>
        </div>
      </div>
    </div>

    
  </div>
</div>

{% endblock %}